{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\frontend\\\\react-mesto-auth\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { BrowserRouter, Routes, Route, Link, useNavigate } from \"react-router-dom\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport Header from \"./Header\";\nimport Api from \"../utils/Api\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup \";\nimport Register from \"./Register\";\nimport LogIn from \"./Login\";\nimport InfoTooltip from \"./InfoToolTip/InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport NavButton from \"./Nav/NavButton\";\nimport sendAuth from \"../utils/Auth\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport react from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const history = useNavigate();\n  const [loggedIn, setLoggedIn] = React.useState(false); //ПОПАПЫ---------------------------------------------------------\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImageAvatarPopupOpen, setIsImageAvatarPopupOpen] = React.useState(false);\n  const [isAuthPopupOpen, setIsAuthPopupOpen] = React.useState(false);\n  const [isRegSucces, setIsRegSucces] = React.useState(\"\"); //ПОПАПЫ_________________________________________________________\n  //ЮЗЕР И КАРТОЧКИ_---------------------------------------------------\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [mail, setMail] = React.useState(\"\"); //ЮЗЕР И КАРТОЧКИ___________________________________________________\n  //ИКОНКА ЗАГРУЗКИ---------------------------------------------------\n\n  const [loaderEdit, setLoaderEdit] = React.useState(false);\n  const [loaderAdd, setLoaderAdd] = React.useState(false);\n  const [loaderAva, setLoaderAva] = React.useState(false); //ИКОНКА ЗАГРУЗКИ___________________________________________________\n\n  React.useEffect(() => {\n    Api.getUserData().then(data => {\n      setCurrentUser(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleImageAvatarPopupClick() {\n    setIsImageAvatarPopupOpen(true);\n  }\n\n  function handleCardClick(cardData) {\n    setSelectedCard(cardData);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImageAvatarPopupOpen(false);\n    setIsAuthPopupOpen(false);\n    setSelectedCard({});\n  }\n\n  React.useEffect(() => {\n    function handleEsc(event) {\n      if (event.key === `Escape`) {\n        closeAllPopups();\n      }\n    }\n\n    document.addEventListener(\"keydown\", handleEsc);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEsc);\n    };\n  }, []);\n\n  function handleUpdateUser(data) {\n    setLoaderEdit(true);\n    Api.sendUserData(data).then(data => {\n      setCurrentUser(data);\n    }).then(() => {\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setLoaderEdit(false);\n    });\n  }\n\n  function handleUpdatAvatar(data) {\n    setLoaderAva(true);\n    Api.changeAvatarRequest(data.avatar).then(data => {\n      setCurrentUser(data);\n    }).then(() => {\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setLoaderAva(false);\n    });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoaderAdd(true);\n    Api.sendUserCard(data).then(data => {\n      setCards([data, ...cards]);\n    }).then(() => {\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setLoaderAdd(false);\n    });\n  } //CARDS\n\n\n  React.useEffect(() => {\n    Api.getCards().then(items => {\n      setCards(items);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function handleCardLike(card) {\n    //Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => {\n      return i._id === currentUser._id;\n    }); // Отправляем запрос в API и получаем обновлённые данные карточки\n\n    Api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n      setCards(cards => cards.map(c => c._id === card._id ? newCard : c));\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function handleDeleteClick(card) {\n    Api.deleteCardRequest(card._id).then(newCard => {\n      setCards(cards => cards.filter(c => c !== card));\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function handleRegistrationSubmit(data) {\n    sendAuth.registration(data).then(regData => {\n      history(\"/sign-in\");\n      setIsAuthPopupOpen(true);\n      setIsRegSucces(true);\n      console.log(regData); // if (regData.data._id) {\n      //     setIsRegSucces(true);\n      // }\n    }).catch(err => {\n      setIsAuthPopupOpen(true);\n      setIsRegSucces(false);\n      console.log(err);\n    });\n  }\n\n  function handleLogInSubmit(data) {\n    sendAuth.authorization(data).then(logInData => {\n      localStorage.setItem(\"token\", logInData.token);\n      setLoggedIn(true);\n      history(\"/\");\n      return logInData;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  React.useEffect(() => {\n    handleTokenCheck();\n    console.log(\"USEeffect\");\n  }, [loggedIn]);\n\n  function handleTokenCheck() {\n    const myToken = localStorage.getItem(\"token\");\n\n    if (myToken) {\n      sendAuth.checkToken(myToken).then(logInData => {\n        setMail(logInData.data.email);\n        console.log(logInData.data.email);\n\n        if (logInData) {\n          setLoggedIn(true);\n          history(\"/\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  function handleExitAccount() {\n    setMail(\"\");\n    localStorage.removeItem(\"token\");\n    setLoggedIn(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(InfoTooltip, {\n        success: isRegSucces,\n        onClose: closeAllPopups,\n        isOpened: isAuthPopupOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-in\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(NavButton, {\n                  email: false,\n                  buttonText: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",\n                  redirect: \"/sign-up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(LogIn, {\n              onSubmit: handleLogInSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-up\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(NavButton, {\n                  email: false,\n                  buttonText: \"\\u0412\\u043E\\u0439\\u0442\\u0438\",\n                  redirect: \"/sign-in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Register, {\n              onSubmit: handleRegistrationSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            redirectTo: \"/sign-in\",\n            loggedIn: loggedIn,\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(NavButton, {\n                  loggedIn: loggedIn,\n                  onClick: handleExitAccount,\n                  email: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"nav__email\",\n                    children: mail\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 53\n                  }, this),\n                  buttonText: \"\\u0412\\u044B\\u0445\\u043E\\u0434\",\n                  redirect: \"/sign-in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Main, {\n              currentUser: currentUser,\n              onEditProfile: handleEditProfileClick,\n              onAddPlace: handleAddPlaceClick,\n              onEditAvatar: handleEditAvatarClick,\n              onImagePopup: handleImageAvatarPopupClick,\n              onImage: handleCardClick,\n              cards: cards,\n              onCardLike: handleCardLike,\n              onCardDelete: handleDeleteClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n              loader: loaderEdit,\n              onUpdateUser: handleUpdateUser,\n              isOpen: isEditProfilePopupOpen,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n              loader: loaderAva,\n              onUpdateUser: handleUpdatAvatar,\n              isOpen: isEditAvatarPopupOpen,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n              loader: loaderAdd,\n              onAddCard: handleAddPlaceSubmit,\n              isOpen: isAddPlacePopupOpen,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n              title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n              name: \"reset-avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n              isOpen: isImageAvatarPopupOpen,\n              name: \"press-image\",\n              card: selectedCard,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"oE0OHuIS8Zxy0B7QBzoPsUNEo94=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/dev/frontend/react-mesto-auth/src/components/App.js"],"names":["React","BrowserRouter","Routes","Route","Link","useNavigate","Main","Footer","PopupWithForm","ImagePopup","Header","Api","EditProfilePopup","EditAvatarPopup","AddPlacePopup","Register","LogIn","InfoTooltip","ProtectedRoute","NavButton","sendAuth","CurrentUserContext","react","App","history","loggedIn","setLoggedIn","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImageAvatarPopupOpen","setIsImageAvatarPopupOpen","isAuthPopupOpen","setIsAuthPopupOpen","isRegSucces","setIsRegSucces","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","mail","setMail","loaderEdit","setLoaderEdit","loaderAdd","setLoaderAdd","loaderAva","setLoaderAva","useEffect","getUserData","then","data","catch","err","console","log","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleImageAvatarPopupClick","handleCardClick","cardData","closeAllPopups","handleEsc","event","key","document","addEventListener","removeEventListener","handleUpdateUser","sendUserData","finally","handleUpdatAvatar","changeAvatarRequest","avatar","handleAddPlaceSubmit","sendUserCard","getCards","items","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","map","c","handleDeleteClick","deleteCardRequest","filter","handleRegistrationSubmit","registration","regData","handleLogInSubmit","authorization","logInData","localStorage","setItem","token","handleTokenCheck","myToken","getItem","checkToken","email","handleExitAccount","removeItem"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n    BrowserRouter,\r\n    Routes,\r\n    Route,\r\n    Link,\r\n    useNavigate,\r\n} from \"react-router-dom\";\r\n\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport Header from \"./Header\";\r\nimport Api from \"../utils/Api\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup \";\r\nimport Register from \"./Register\";\r\nimport LogIn from \"./Login\";\r\nimport InfoTooltip from \"./InfoToolTip/InfoTooltip\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport NavButton from \"./Nav/NavButton\";\r\nimport sendAuth from \"../utils/Auth\";\r\n\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport react from \"react\";\r\n\r\nfunction App() {\r\n    const history = useNavigate();\r\n    const [loggedIn, setLoggedIn] = React.useState(false);\r\n    //ПОПАПЫ---------------------------------------------------------\r\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\r\n        React.useState(false);\r\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\r\n        React.useState(false);\r\n    const [isImageAvatarPopupOpen, setIsImageAvatarPopupOpen] =\r\n        React.useState(false);\r\n\r\n    const [isAuthPopupOpen, setIsAuthPopupOpen] = React.useState(false);\r\n    const [isRegSucces, setIsRegSucces] = React.useState(\"\");\r\n    //ПОПАПЫ_________________________________________________________\r\n\r\n    //ЮЗЕР И КАРТОЧКИ_---------------------------------------------------\r\n    const [selectedCard, setSelectedCard] = React.useState({});\r\n\r\n    const [currentUser, setCurrentUser] = React.useState({});\r\n\r\n    const [cards, setCards] = React.useState([]);\r\n\r\n    const [mail, setMail] = React.useState(\"\");\r\n    //ЮЗЕР И КАРТОЧКИ___________________________________________________\r\n\r\n    //ИКОНКА ЗАГРУЗКИ---------------------------------------------------\r\n    const [loaderEdit, setLoaderEdit] = React.useState(false);\r\n    const [loaderAdd, setLoaderAdd] = React.useState(false);\r\n    const [loaderAva, setLoaderAva] = React.useState(false);\r\n    //ИКОНКА ЗАГРУЗКИ___________________________________________________\r\n\r\n    React.useEffect(() => {\r\n        Api.getUserData()\r\n            .then((data) => {\r\n                setCurrentUser(data);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }, []);\r\n\r\n    function handleEditAvatarClick() {\r\n        setIsEditAvatarPopupOpen(true);\r\n    }\r\n\r\n    function handleEditProfileClick() {\r\n        setIsEditProfilePopupOpen(true);\r\n    }\r\n\r\n    function handleAddPlaceClick() {\r\n        setIsAddPlacePopupOpen(true);\r\n    }\r\n\r\n    function handleImageAvatarPopupClick() {\r\n        setIsImageAvatarPopupOpen(true);\r\n    }\r\n\r\n    function handleCardClick(cardData) {\r\n        setSelectedCard(cardData);\r\n    }\r\n\r\n    function closeAllPopups() {\r\n        setIsEditProfilePopupOpen(false);\r\n        setIsEditAvatarPopupOpen(false);\r\n        setIsAddPlacePopupOpen(false);\r\n        setIsImageAvatarPopupOpen(false);\r\n        setIsAuthPopupOpen(false);\r\n        setSelectedCard({});\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        function handleEsc(event) {\r\n            if (event.key === `Escape`) {\r\n                closeAllPopups();\r\n            }\r\n        }\r\n        document.addEventListener(\"keydown\", handleEsc);\r\n\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleEsc);\r\n        };\r\n    }, []);\r\n\r\n    function handleUpdateUser(data) {\r\n        setLoaderEdit(true);\r\n        Api.sendUserData(data)\r\n            .then((data) => {\r\n                setCurrentUser(data);\r\n            })\r\n            .then(() => {\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n            .finally(() => {\r\n                setLoaderEdit(false);\r\n            });\r\n    }\r\n\r\n    function handleUpdatAvatar(data) {\r\n        setLoaderAva(true);\r\n        Api.changeAvatarRequest(data.avatar)\r\n            .then((data) => {\r\n                setCurrentUser(data);\r\n            })\r\n            .then(() => {\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n            .finally(() => {\r\n                setLoaderAva(false);\r\n            });\r\n    }\r\n\r\n    function handleAddPlaceSubmit(data) {\r\n        setLoaderAdd(true);\r\n        Api.sendUserCard(data)\r\n            .then((data) => {\r\n                setCards([data, ...cards]);\r\n            })\r\n            .then(() => {\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n            .finally(() => {\r\n                setLoaderAdd(false);\r\n            });\r\n    }\r\n\r\n    //CARDS\r\n\r\n    React.useEffect(() => {\r\n        Api.getCards()\r\n            .then((items) => {\r\n                setCards(items);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }, []);\r\n\r\n    function handleCardLike(card) {\r\n        //Снова проверяем, есть ли уже лайк на этой карточке\r\n        const isLiked = card.likes.some((i) => {\r\n            return i._id === currentUser._id;\r\n        });\r\n\r\n        // Отправляем запрос в API и получаем обновлённые данные карточки\r\n        Api.changeLikeCardStatus(card._id, !isLiked)\r\n            .then((newCard) => {\r\n                setCards((cards) =>\r\n                    cards.map((c) => (c._id === card._id ? newCard : c))\r\n                );\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    function handleDeleteClick(card) {\r\n        Api.deleteCardRequest(card._id)\r\n            .then((newCard) => {\r\n                setCards((cards) => cards.filter((c) => c !== card));\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    function handleRegistrationSubmit(data) {\r\n        sendAuth\r\n            .registration(data)\r\n            .then((regData) => {\r\n                history(\"/sign-in\");\r\n                setIsAuthPopupOpen(true);\r\n                setIsRegSucces(true);\r\n                console.log(regData);\r\n                // if (regData.data._id) {\r\n                //     setIsRegSucces(true);\r\n                // }\r\n            })\r\n            .catch((err) => {\r\n                setIsAuthPopupOpen(true);\r\n                setIsRegSucces(false);\r\n\r\n                console.log(err);\r\n            });\r\n    }\r\n    function handleLogInSubmit(data) {\r\n        sendAuth\r\n            .authorization(data)\r\n            .then((logInData) => {\r\n                localStorage.setItem(\"token\", logInData.token);\r\n                setLoggedIn(true);\r\n\r\n                history(\"/\");\r\n\r\n                return logInData;\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        handleTokenCheck();\r\n        console.log(\"USEeffect\");\r\n    }, [loggedIn]);\r\n    function handleTokenCheck() {\r\n        const myToken = localStorage.getItem(\"token\");\r\n        if (myToken) {\r\n            sendAuth\r\n                .checkToken(myToken)\r\n                .then((logInData) => {\r\n                    setMail(logInData.data.email);\r\n                    console.log(logInData.data.email);\r\n                    if (logInData) {\r\n                        setLoggedIn(true);\r\n\r\n                        history(\"/\");\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        }\r\n    }\r\n\r\n    function handleExitAccount() {\r\n        setMail(\"\");\r\n        localStorage.removeItem(\"token\");\r\n        setLoggedIn(false);\r\n    }\r\n\r\n    return (\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n            <div className=\"App\">\r\n                <InfoTooltip\r\n                    success={isRegSucces}\r\n                    onClose={closeAllPopups}\r\n                    isOpened={isAuthPopupOpen}\r\n                />\r\n\r\n                <Routes>\r\n                    <Route\r\n                        path=\"/sign-in\"\r\n                        element={\r\n                            <>\r\n                                <Header\r\n                                    children={\r\n                                        <>\r\n                                            <NavButton\r\n                                                email={false}\r\n                                                buttonText=\"Регистрация\"\r\n                                                redirect=\"/sign-up\"\r\n                                            />\r\n                                        </>\r\n                                    }\r\n                                />\r\n                                <LogIn onSubmit={handleLogInSubmit} />\r\n                            </>\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/sign-up\"\r\n                        element={\r\n                            <>\r\n                                <Header\r\n                                    children={\r\n                                        <>\r\n                                            <NavButton\r\n                                                email={false}\r\n                                                buttonText=\"Войти\"\r\n                                                redirect=\"/sign-in\"\r\n                                            />\r\n                                        </>\r\n                                    }\r\n                                />\r\n                                <Register onSubmit={handleRegistrationSubmit} />\r\n                            </>\r\n                        }\r\n                    />\r\n\r\n                    <Route\r\n                        exact\r\n                        path=\"/\"\r\n                        element={\r\n                            <ProtectedRoute\r\n                                redirectTo=\"/sign-in\"\r\n                                loggedIn={loggedIn}\r\n                            >\r\n                                <Header\r\n                                    children={\r\n                                        <>\r\n                                            <NavButton\r\n                                                loggedIn={loggedIn}\r\n                                                onClick={handleExitAccount}\r\n                                                email={\r\n                                                    <h3 className=\"nav__email\">\r\n                                                        {mail}\r\n                                                    </h3>\r\n                                                }\r\n                                                buttonText=\"Выход\"\r\n                                                redirect=\"/sign-in\"\r\n                                            />\r\n                                        </>\r\n                                    }\r\n                                />\r\n                                <Main\r\n                                    currentUser={currentUser}\r\n                                    onEditProfile={handleEditProfileClick}\r\n                                    onAddPlace={handleAddPlaceClick}\r\n                                    onEditAvatar={handleEditAvatarClick}\r\n                                    onImagePopup={handleImageAvatarPopupClick}\r\n                                    onImage={handleCardClick}\r\n                                    cards={cards}\r\n                                    onCardLike={handleCardLike}\r\n                                    onCardDelete={handleDeleteClick}\r\n                                />\r\n                                <EditProfilePopup\r\n                                    loader={loaderEdit}\r\n                                    onUpdateUser={handleUpdateUser}\r\n                                    isOpen={isEditProfilePopupOpen}\r\n                                    onClose={closeAllPopups}\r\n                                />\r\n                                <EditAvatarPopup\r\n                                    loader={loaderAva}\r\n                                    onUpdateUser={handleUpdatAvatar}\r\n                                    isOpen={isEditAvatarPopupOpen}\r\n                                    onClose={closeAllPopups}\r\n                                />\r\n                                <AddPlacePopup\r\n                                    loader={loaderAdd}\r\n                                    onAddCard={handleAddPlaceSubmit}\r\n                                    isOpen={isAddPlacePopupOpen}\r\n                                    onClose={closeAllPopups}\r\n                                />\r\n                                <PopupWithForm\r\n                                    title=\"Вы уверены?\"\r\n                                    name=\"reset-avatar\"\r\n                                />\r\n                                <ImagePopup\r\n                                    isOpen={isImageAvatarPopupOpen}\r\n                                    name=\"press-image\"\r\n                                    card={selectedCard}\r\n                                    onClose={closeAllPopups}\r\n                                />\r\n                                <Footer />{\" \"}\r\n                            </ProtectedRoute>\r\n                        }\r\n                    />\r\n                </Routes>\r\n            </div>\r\n        </CurrentUserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}