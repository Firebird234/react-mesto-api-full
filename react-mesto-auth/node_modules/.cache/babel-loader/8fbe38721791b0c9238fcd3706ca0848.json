{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\frontend\\\\react-mesto-auth\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { BrowserRouter, Routes, Route, Link, useNavigate } from \"react-router-dom\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport Header from \"./Header\";\nimport Api from \"../utils/Api\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup \";\nimport Register from \"./Register\";\nimport LogIn from \"./Login\";\nimport InfoTooltip from \"./InfoToolTip/InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport NavButton from \"./Nav/NavButton\";\nimport sendAuth from \"../utils/Auth\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport react from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const history = useNavigate();\n  const [loggedIn, setLoggedIn] = React.useState(false); //ПОПАПЫ---------------------------------------------------------\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImageAvatarPopupOpen, setIsImageAvatarPopupOpen] = React.useState(false);\n  const [isAuthPopupOpen, setIsAuthPopupOpen] = React.useState(false);\n  const [isRegSucces, setIsRegSucces] = React.useState(\"\"); //ПОПАПЫ_________________________________________________________\n  //ЮЗЕР И КАРТОЧКИ_---------------------------------------------------\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [mail, setMail] = React.useState(\"\"); //ЮЗЕР И КАРТОЧКИ___________________________________________________\n  //ИКОНКА ЗАГРУЗКИ---------------------------------------------------\n\n  const [loaderEdit, setLoaderEdit] = React.useState(false);\n  const [loaderAdd, setLoaderAdd] = React.useState(false);\n  const [loaderAva, setLoaderAva] = React.useState(false); //ИКОНКА ЗАГРУЗКИ___________________________________________________\n\n  React.useEffect(() => {\n    Api.getUserData().then(data => {\n      setCurrentUser(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleImageAvatarPopupClick() {\n    setIsImageAvatarPopupOpen(true);\n  }\n\n  function handleCardClick(cardData) {\n    setSelectedCard(cardData);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImageAvatarPopupOpen(false);\n    setIsAuthPopupOpen(false);\n    setSelectedCard({});\n  }\n\n  React.useEffect(() => {\n    function handleEsc(event) {\n      if (event.key === `Escape`) {\n        closeAllPopups();\n      }\n    }\n\n    document.addEventListener(\"keydown\", handleEsc);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEsc);\n    };\n  }, []);\n\n  function handleUpdateUser(data) {\n    setLoaderEdit(true);\n    Api.sendUserData(data).then(data => {\n      setCurrentUser(data);\n    }).then(() => {\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setLoaderEdit(false);\n    });\n  }\n\n  function handleUpdatAvatar(data) {\n    setLoaderAva(true);\n    Api.changeAvatarRequest(data.avatar).then(data => {\n      setCurrentUser(data);\n    }).then(() => {\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setLoaderAva(false);\n    });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setLoaderAdd(true);\n    Api.sendUserCard(data).then(data => {\n      setCards([data, ...cards]);\n    }).then(() => {\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setLoaderAdd(false);\n    });\n  } //CARDS\n\n\n  React.useEffect(() => {\n    consloe.log(currentUser);\n    Api.getCards().then(items => {\n      setCards(items);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function handleCardLike(card) {\n    //Снова проверяем, есть ли уже лайк на этой карточке\n    console.log(currentUser.me._id);\n    const isLiked = card.likes.some(i => {\n      console.log(i);\n      return i === currentUser.me._id;\n    });\n    console.log(card); // Отправляем запрос в API и получаем обновлённые данные карточки\n\n    Api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n      setCards(cards => cards.map(c => c._id === card._id ? newCard : c));\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function handleDeleteClick(card) {\n    Api.deleteCardRequest(card._id).then(newCard => {\n      setCards(cards => cards.filter(c => c !== card));\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function handleRegistrationSubmit(data) {\n    sendAuth.registration(data).then(regData => {\n      history(\"/sign-in\");\n      setIsAuthPopupOpen(true);\n      setIsRegSucces(true);\n      console.log(regData); // if (regData.data._id) {\n      //     setIsRegSucces(true);\n      // }\n    }).catch(err => {\n      setIsAuthPopupOpen(true);\n      setIsRegSucces(false);\n      console.log(err);\n    });\n  }\n\n  function handleLogInSubmit(data) {\n    sendAuth.authorization(data).then(logInData => {\n      localStorage.setItem(\"token\", logInData.token);\n      setLoggedIn(true);\n      history(\"/\");\n      return logInData;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  React.useEffect(() => {\n    handleTokenCheck();\n    console.log(\"USEeffect\");\n  }, [loggedIn]);\n\n  function handleTokenCheck() {\n    const myToken = localStorage.getItem(\"token\");\n    console.log(myToken);\n\n    if (myToken) {\n      sendAuth.checkToken(myToken).then(logInData => {\n        setMail(logInData.me.email);\n        console.log(logInData);\n\n        if (logInData) {\n          setLoggedIn(true);\n          console.log(\"done\");\n          history(\"/\");\n        }\n      }).catch(err => {\n        console.log(\"my\", err);\n      });\n    }\n  }\n\n  function handleExitAccount() {\n    setMail(\"\");\n    localStorage.removeItem(\"token\");\n    setLoggedIn(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(InfoTooltip, {\n        success: isRegSucces,\n        onClose: closeAllPopups,\n        isOpened: isAuthPopupOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-in\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(NavButton, {\n                  email: false,\n                  buttonText: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",\n                  redirect: \"/sign-up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(LogIn, {\n              onSubmit: handleLogInSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-up\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(NavButton, {\n                  email: false,\n                  buttonText: \"\\u0412\\u043E\\u0439\\u0442\\u0438\",\n                  redirect: \"/sign-in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Register, {\n              onSubmit: handleRegistrationSubmit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            redirectTo: \"/sign-in\",\n            loggedIn: loggedIn,\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(NavButton, {\n                  loggedIn: loggedIn,\n                  onClick: handleExitAccount,\n                  email: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"nav__email\",\n                    children: mail\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 32\n                  }, this),\n                  buttonText: \"\\u0412\\u044B\\u0445\\u043E\\u0434\",\n                  redirect: \"/sign-in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Main, {\n              currentUser: currentUser,\n              onEditProfile: handleEditProfileClick,\n              onAddPlace: handleAddPlaceClick,\n              onEditAvatar: handleEditAvatarClick,\n              onImagePopup: handleImageAvatarPopupClick,\n              onImage: handleCardClick,\n              cards: cards,\n              onCardLike: handleCardLike,\n              onCardDelete: handleDeleteClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n              loader: loaderEdit,\n              onUpdateUser: handleUpdateUser,\n              isOpen: isEditProfilePopupOpen,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n              loader: loaderAva,\n              onUpdateUser: handleUpdatAvatar,\n              isOpen: isEditAvatarPopupOpen,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n              loader: loaderAdd,\n              onAddCard: handleAddPlaceSubmit,\n              isOpen: isAddPlacePopupOpen,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n              title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n              name: \"reset-avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n              isOpen: isImageAvatarPopupOpen,\n              name: \"press-image\",\n              card: selectedCard,\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 17\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"oE0OHuIS8Zxy0B7QBzoPsUNEo94=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/dev/frontend/react-mesto-auth/src/components/App.js"],"names":["React","BrowserRouter","Routes","Route","Link","useNavigate","Main","Footer","PopupWithForm","ImagePopup","Header","Api","EditProfilePopup","EditAvatarPopup","AddPlacePopup","Register","LogIn","InfoTooltip","ProtectedRoute","NavButton","sendAuth","CurrentUserContext","react","App","history","loggedIn","setLoggedIn","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImageAvatarPopupOpen","setIsImageAvatarPopupOpen","isAuthPopupOpen","setIsAuthPopupOpen","isRegSucces","setIsRegSucces","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","mail","setMail","loaderEdit","setLoaderEdit","loaderAdd","setLoaderAdd","loaderAva","setLoaderAva","useEffect","getUserData","then","data","catch","err","console","log","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleImageAvatarPopupClick","handleCardClick","cardData","closeAllPopups","handleEsc","event","key","document","addEventListener","removeEventListener","handleUpdateUser","sendUserData","finally","handleUpdatAvatar","changeAvatarRequest","avatar","handleAddPlaceSubmit","sendUserCard","consloe","getCards","items","handleCardLike","card","me","_id","isLiked","likes","some","i","changeLikeCardStatus","newCard","map","c","handleDeleteClick","deleteCardRequest","filter","handleRegistrationSubmit","registration","regData","handleLogInSubmit","authorization","logInData","localStorage","setItem","token","handleTokenCheck","myToken","getItem","checkToken","email","handleExitAccount","removeItem"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  BrowserRouter,\r\n  Routes,\r\n  Route,\r\n  Link,\r\n  useNavigate,\r\n} from \"react-router-dom\";\r\n\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport Header from \"./Header\";\r\nimport Api from \"../utils/Api\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup \";\r\nimport Register from \"./Register\";\r\nimport LogIn from \"./Login\";\r\nimport InfoTooltip from \"./InfoToolTip/InfoTooltip\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport NavButton from \"./Nav/NavButton\";\r\nimport sendAuth from \"../utils/Auth\";\r\n\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport react from \"react\";\r\n\r\nfunction App() {\r\n  const history = useNavigate();\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  //ПОПАПЫ---------------------------------------------------------\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\r\n    React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\r\n    React.useState(false);\r\n  const [isImageAvatarPopupOpen, setIsImageAvatarPopupOpen] =\r\n    React.useState(false);\r\n\r\n  const [isAuthPopupOpen, setIsAuthPopupOpen] = React.useState(false);\r\n  const [isRegSucces, setIsRegSucces] = React.useState(\"\");\r\n  //ПОПАПЫ_________________________________________________________\r\n\r\n  //ЮЗЕР И КАРТОЧКИ_---------------------------------------------------\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  const [mail, setMail] = React.useState(\"\");\r\n  //ЮЗЕР И КАРТОЧКИ___________________________________________________\r\n\r\n  //ИКОНКА ЗАГРУЗКИ---------------------------------------------------\r\n  const [loaderEdit, setLoaderEdit] = React.useState(false);\r\n  const [loaderAdd, setLoaderAdd] = React.useState(false);\r\n  const [loaderAva, setLoaderAva] = React.useState(false);\r\n  //ИКОНКА ЗАГРУЗКИ___________________________________________________\r\n\r\n  React.useEffect(() => {\r\n    Api.getUserData()\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleImageAvatarPopupClick() {\r\n    setIsImageAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(cardData) {\r\n    setSelectedCard(cardData);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImageAvatarPopupOpen(false);\r\n    setIsAuthPopupOpen(false);\r\n    setSelectedCard({});\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    function handleEsc(event) {\r\n      if (event.key === `Escape`) {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    document.addEventListener(\"keydown\", handleEsc);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEsc);\r\n    };\r\n  }, []);\r\n\r\n  function handleUpdateUser(data) {\r\n    setLoaderEdit(true);\r\n    Api.sendUserData(data)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .then(() => {\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setLoaderEdit(false);\r\n      });\r\n  }\r\n\r\n  function handleUpdatAvatar(data) {\r\n    setLoaderAva(true);\r\n    Api.changeAvatarRequest(data.avatar)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .then(() => {\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setLoaderAva(false);\r\n      });\r\n  }\r\n\r\n  function handleAddPlaceSubmit(data) {\r\n    setLoaderAdd(true);\r\n    Api.sendUserCard(data)\r\n      .then((data) => {\r\n        setCards([data, ...cards]);\r\n      })\r\n      .then(() => {\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setLoaderAdd(false);\r\n      });\r\n  }\r\n\r\n  //CARDS\r\n\r\n  React.useEffect(() => {\r\n    consloe.log(currentUser);\r\n    Api.getCards()\r\n      .then((items) => {\r\n        setCards(items);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  function handleCardLike(card) {\r\n    //Снова проверяем, есть ли уже лайк на этой карточке\r\n    console.log(currentUser.me._id);\r\n    const isLiked = card.likes.some((i) => {\r\n      console.log(i);\r\n      return i === currentUser.me._id;\r\n    });\r\n    console.log(card);\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    Api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCards((cards) =>\r\n          cards.map((c) => (c._id === card._id ? newCard : c))\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleDeleteClick(card) {\r\n    Api.deleteCardRequest(card._id)\r\n      .then((newCard) => {\r\n        setCards((cards) => cards.filter((c) => c !== card));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleRegistrationSubmit(data) {\r\n    sendAuth\r\n      .registration(data)\r\n      .then((regData) => {\r\n        history(\"/sign-in\");\r\n        setIsAuthPopupOpen(true);\r\n        setIsRegSucces(true);\r\n        console.log(regData);\r\n        // if (regData.data._id) {\r\n        //     setIsRegSucces(true);\r\n        // }\r\n      })\r\n      .catch((err) => {\r\n        setIsAuthPopupOpen(true);\r\n        setIsRegSucces(false);\r\n\r\n        console.log(err);\r\n      });\r\n  }\r\n  function handleLogInSubmit(data) {\r\n    sendAuth\r\n      .authorization(data)\r\n      .then((logInData) => {\r\n        localStorage.setItem(\"token\", logInData.token);\r\n        setLoggedIn(true);\r\n\r\n        history(\"/\");\r\n\r\n        return logInData;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    handleTokenCheck();\r\n    console.log(\"USEeffect\");\r\n  }, [loggedIn]);\r\n  function handleTokenCheck() {\r\n    const myToken = localStorage.getItem(\"token\");\r\n    console.log(myToken);\r\n    if (myToken) {\r\n      sendAuth\r\n        .checkToken(myToken)\r\n        .then((logInData) => {\r\n          setMail(logInData.me.email);\r\n          console.log(logInData);\r\n          if (logInData) {\r\n            setLoggedIn(true);\r\n            console.log(\"done\");\r\n            history(\"/\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"my\", err);\r\n        });\r\n    }\r\n  }\r\n\r\n  function handleExitAccount() {\r\n    setMail(\"\");\r\n    localStorage.removeItem(\"token\");\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <InfoTooltip\r\n          success={isRegSucces}\r\n          onClose={closeAllPopups}\r\n          isOpened={isAuthPopupOpen}\r\n        />\r\n\r\n        <Routes>\r\n          <Route\r\n            path=\"/sign-in\"\r\n            element={\r\n              <>\r\n                <Header\r\n                  children={\r\n                    <>\r\n                      <NavButton\r\n                        email={false}\r\n                        buttonText=\"Регистрация\"\r\n                        redirect=\"/sign-up\"\r\n                      />\r\n                    </>\r\n                  }\r\n                />\r\n                <LogIn onSubmit={handleLogInSubmit} />\r\n              </>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/sign-up\"\r\n            element={\r\n              <>\r\n                <Header\r\n                  children={\r\n                    <>\r\n                      <NavButton\r\n                        email={false}\r\n                        buttonText=\"Войти\"\r\n                        redirect=\"/sign-in\"\r\n                      />\r\n                    </>\r\n                  }\r\n                />\r\n                <Register onSubmit={handleRegistrationSubmit} />\r\n              </>\r\n            }\r\n          />\r\n\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            element={\r\n              <ProtectedRoute redirectTo=\"/sign-in\" loggedIn={loggedIn}>\r\n                <Header\r\n                  children={\r\n                    <>\r\n                      <NavButton\r\n                        loggedIn={loggedIn}\r\n                        onClick={handleExitAccount}\r\n                        email={<h3 className=\"nav__email\">{mail}</h3>}\r\n                        buttonText=\"Выход\"\r\n                        redirect=\"/sign-in\"\r\n                      />\r\n                    </>\r\n                  }\r\n                />\r\n                <Main\r\n                  currentUser={currentUser}\r\n                  onEditProfile={handleEditProfileClick}\r\n                  onAddPlace={handleAddPlaceClick}\r\n                  onEditAvatar={handleEditAvatarClick}\r\n                  onImagePopup={handleImageAvatarPopupClick}\r\n                  onImage={handleCardClick}\r\n                  cards={cards}\r\n                  onCardLike={handleCardLike}\r\n                  onCardDelete={handleDeleteClick}\r\n                />\r\n                <EditProfilePopup\r\n                  loader={loaderEdit}\r\n                  onUpdateUser={handleUpdateUser}\r\n                  isOpen={isEditProfilePopupOpen}\r\n                  onClose={closeAllPopups}\r\n                />\r\n                <EditAvatarPopup\r\n                  loader={loaderAva}\r\n                  onUpdateUser={handleUpdatAvatar}\r\n                  isOpen={isEditAvatarPopupOpen}\r\n                  onClose={closeAllPopups}\r\n                />\r\n                <AddPlacePopup\r\n                  loader={loaderAdd}\r\n                  onAddCard={handleAddPlaceSubmit}\r\n                  isOpen={isAddPlacePopupOpen}\r\n                  onClose={closeAllPopups}\r\n                />\r\n                <PopupWithForm title=\"Вы уверены?\" name=\"reset-avatar\" />\r\n                <ImagePopup\r\n                  isOpen={isImageAvatarPopupOpen}\r\n                  name=\"press-image\"\r\n                  card={selectedCard}\r\n                  onClose={closeAllPopups}\r\n                />\r\n                <Footer />{\" \"}\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n        </Routes>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}