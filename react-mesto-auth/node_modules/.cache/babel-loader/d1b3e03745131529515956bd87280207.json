{"ast":null,"code":"import _classCallCheck from\"C:/dev/frontend/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/dev/frontend/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";export var Api=/*#__PURE__*/function(){function Api(baseUrl,headers){_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"getUserData\",value:function getUserData(){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"GET\",headers:this._headers}).then(this._checkResponse);}},{key:\"getCards\",value:function getCards(){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:\"GET\",headers:this._headers}).then(this._checkResponse);}},{key:\"sendUserData\",value:function sendUserData(data){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(this._checkResponse);}},{key:\"sendUserCard\",value:function sendUserCard(data){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:\"POST\",headers:this._headers,body:JSON.stringify({name:data.addName,link:data.addLink})}).then(this._checkResponse);}//ЭТО ТЕСТЕР\n//     sendUserCard() {\n//     return fetch(`${this._baseUrl}cards`, {\n//         method: 'POST',\n//         headers: this._headers,\n//         body: JSON.stringify({\n//           name: 'EMPERROR GUIDES',\n//           link: 'https://yobte.ru/uploads/posts/2019-11/warhammer-40000-55-foto-39.jpg'\n//         })\n//       })\n//       .then(this._checkResponse);\n// }\n},{key:\"deleteCardRequest\",value:function deleteCardRequest(cardId){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:this._headers}).then(this._checkResponse);}},{key:\"pressLikeRequest\",value:function pressLikeRequest(cardId){return fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(cardId),{method:\"PUT\",headers:this._headers}).then(this._checkResponse);}},{key:\"deleteLikeRequest\",value:function deleteLikeRequest(cardId){return fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(cardId),{method:\"DELETE\",headers:this._headers}).then(this._checkResponse);}},{key:\"changeAvatarRequest\",value:function changeAvatarRequest(data){return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:data})}).then(this._checkResponse);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){console.log(isLiked);if(isLiked){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:\"PUT\",headers:this._headers}).then(function(res){return res;}).then(this._checkResponse);}else{return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:\"DELETE\",headers:this._headers}).then(function(res){console.log(res);return res;}).then(this._checkResponse);}}},{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(res.status));}// registration(link, data) {\n//     return fetch(`${link}/signup`, {\n//         method: \"POST\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify({\n//             password: data.registerPassword,\n//             email: data.registerEmail,\n//         }),\n//     })\n//         .then((res) => {\n//             return res;\n//         })\n//         .then(this._checkResponse);\n// }\n// authorization(link, data) {\n//     return fetch(`${link}/signin`, {\n//         method: \"POST\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify({\n//             password: data.logInPassword,\n//             email: data.logInEmail,\n//         }),\n//     })\n//         .then((res) => {\n//             console.log(res);\n//             return res;\n//         })\n//         .then((res) => {\n//             if (res.token) {\n//                 localStorage.setItem(\"token\", res.token);\n//                 return res;\n//             } else {\n//                 return res;\n//             }\n//         })\n//         .then(this._checkResponse);\n// }\n// checkToken(link, token) {\n//     return fetch(`${link}/users/me`, {\n//         method: \"GET\",\n//         headers: {\n//             \"Content-Type\": \"application/json\",\n//             Authorization: `Bearer ${token}`,\n//         },\n//     })\n//         .then((res) => {\n//             return res;\n//         })\n//         .then(this._checkResponse);\n// }\n//https://api.best-site.ever.nomoredomains.work\n}]);return Api;}();var sendRequest=new Api(\"http://localhost:3000\",{authorization:\"Bearer\".concat(localStorage.getItem(\"token\")),\"Content-Type\":\"application/json\",credentials:\"include\"});export default sendRequest;","map":{"version":3,"sources":["C:/dev/frontend/react-mesto-auth/src/utils/Api.js"],"names":["Api","baseUrl","headers","_baseUrl","_headers","fetch","method","then","_checkResponse","data","body","JSON","stringify","name","about","addName","link","addLink","cardId","avatar","isLiked","console","log","res","ok","json","Promise","reject","status","sendRequest","authorization","localStorage","getItem","credentials"],"mappings":"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","sourcesContent":["export class Api {\r\n  constructor(baseUrl, headers) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  sendUserData(data) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  sendUserCard(data) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.addName,\r\n        link: data.addLink,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  //ЭТО ТЕСТЕР\r\n  //     sendUserCard() {\r\n  //     return fetch(`${this._baseUrl}cards`, {\r\n  //         method: 'POST',\r\n  //         headers: this._headers,\r\n  //         body: JSON.stringify({\r\n  //           name: 'EMPERROR GUIDES',\r\n  //           link: 'https://yobte.ru/uploads/posts/2019-11/warhammer-40000-55-foto-39.jpg'\r\n  //         })\r\n  //       })\r\n  //       .then(this._checkResponse);\r\n  // }\r\n\r\n  deleteCardRequest(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  pressLikeRequest(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteLikeRequest(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeAvatarRequest(data) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: data,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    console.log(isLiked);\r\n    if (isLiked) {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: \"PUT\",\r\n        headers: this._headers,\r\n      })\r\n        .then((res) => {\r\n          return res;\r\n        })\r\n        .then(this._checkResponse);\r\n    } else {\r\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          return res;\r\n        })\r\n        .then(this._checkResponse);\r\n    }\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n  }\r\n\r\n  // registration(link, data) {\r\n  //     return fetch(`${link}/signup`, {\r\n  //         method: \"POST\",\r\n  //         headers: { \"Content-Type\": \"application/json\" },\r\n  //         body: JSON.stringify({\r\n  //             password: data.registerPassword,\r\n  //             email: data.registerEmail,\r\n  //         }),\r\n  //     })\r\n  //         .then((res) => {\r\n  //             return res;\r\n  //         })\r\n  //         .then(this._checkResponse);\r\n  // }\r\n\r\n  // authorization(link, data) {\r\n  //     return fetch(`${link}/signin`, {\r\n  //         method: \"POST\",\r\n  //         headers: { \"Content-Type\": \"application/json\" },\r\n  //         body: JSON.stringify({\r\n  //             password: data.logInPassword,\r\n  //             email: data.logInEmail,\r\n  //         }),\r\n  //     })\r\n  //         .then((res) => {\r\n  //             console.log(res);\r\n  //             return res;\r\n  //         })\r\n  //         .then((res) => {\r\n  //             if (res.token) {\r\n  //                 localStorage.setItem(\"token\", res.token);\r\n  //                 return res;\r\n  //             } else {\r\n  //                 return res;\r\n  //             }\r\n  //         })\r\n  //         .then(this._checkResponse);\r\n  // }\r\n\r\n  // checkToken(link, token) {\r\n  //     return fetch(`${link}/users/me`, {\r\n  //         method: \"GET\",\r\n  //         headers: {\r\n  //             \"Content-Type\": \"application/json\",\r\n  //             Authorization: `Bearer ${token}`,\r\n  //         },\r\n  //     })\r\n  //         .then((res) => {\r\n  //             return res;\r\n  //         })\r\n  //         .then(this._checkResponse);\r\n  // }\r\n  //https://api.best-site.ever.nomoredomains.work\r\n}\r\n\r\nconst sendRequest = new Api(\"http://localhost:3000\", {\r\n  authorization: `Bearer${localStorage.getItem(\"token\")}`,\r\n  \"Content-Type\": \"application/json\",\r\n  credentials: \"include\",\r\n});\r\n\r\nexport default sendRequest;\r\n"]},"metadata":{},"sourceType":"module"}